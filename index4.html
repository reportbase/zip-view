<!DOCTYPE html>
<html> 
<head>
  <title>Chrome Identity Example</title> 
</head> 
<body>
  <h1>Chrome Identity Example</h1>
  <button id="sign-in-button">Sign in with Chrome</button>
  <div id="email-address"></div> 

  <script>
    // Sign in with Chrome.
    function signIn() {
      chrome.identity.getAuthToken({
        interactive: true
      }).then(function(authResult) {
        // The user is signed in.
        // Get the user's email address.
        gapi.client.people.people.get({
          resourceName: 'people/me',
          personFields: 'emailAddresses'
        }).execute(function(response) {
          // Display the user's email address on the page.
          document.getElementById('email-address').innerHTML = response.emailAddresses[0].value;
        });
      });
    }

    // Handle the sign-in button click.
    document.getElementById('sign-in-button').addEventListener('click', signIn);
  </script>
</body>
</html>
