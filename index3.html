<!DOCTYPE html>
<html>
<head>
  <title>Google Auth2 Sign-on Example</title>
  <script src="https://apis.google.com/js/platform.js"></script>
</head>
<body>
  <h1>Google Auth2 Sign-on Example</h1>
  <button id="google-sign-in-button">Sign in with Google</button>

  <script>
    // Create a new window to sign in with Google.
    function openGoogleSignInWindow() {
      var w = window.open('https://accounts.google.com/o/oauth2/v2/auth?client_id=866271378749-uupeiu6kqu3huchf701akl91p0tdaijr.apps.googleusercontent.com&scope=openid%20email%20profile&response_type=code', '_blank', 'width=600,height=400');

      // Listen for the window to close.
      w.addEventListener('close', function() {
        // Get the code from the URL of the closed window.
        var code = window.location.search.substring(1).split('&')[0].split('=')[1];

        // Exchange the code for an access token.
        gapi.auth2.getAuthInstance().getToken(code).then(function(authResult) {
          // The user is signed in.
          console.log(authResult);
        });
      });
    }

    // Handle the sign-in button click.
    document.getElementById('google-sign-in-button').addEventListener('click', openGoogleSignInWindow);
  </script>
</body>
</html>
